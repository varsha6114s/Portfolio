import*as s from"https://unpkg.com/three@0.157.0/build/three.module.js";import{gsap as h}from"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();console.log("Initializing portfolio...");let g,d,u,c;const m=2e3;document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, setting up...");try{p(),y(),b(),v()}catch(o){console.error("Error during initialization:",o)}});function p(){console.log("Initializing Three.js..."),g=new s.Scene,d=new s.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),d.position.z=30;const o=document.getElementById("particle-canvas");if(!o){console.error("Canvas element not found!");return}console.log("Canvas found, creating renderer..."),u=new s.WebGLRenderer({canvas:o,alpha:!0,antialias:!0}),o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.zIndex="-1",u.setSize(window.innerWidth,window.innerHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),w();const e=new s.AmbientLight(16777215,.5);g.add(e);const r=new s.PointLight(16777215,1);r.position.set(10,10,10),g.add(r),window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}),document.addEventListener("mousemove",n=>{const t=n.clientX/window.innerWidth*2-1,i=-(n.clientY/window.innerHeight)*2+1;c&&h.to(c.rotation,{x:i*.1,y:t*.1,duration:2})}),console.log("Three.js initialization complete"),f()}function w(){const o=new s.BufferGeometry,e=new Float32Array(m*3),r=new Float32Array(m*3),n=new s.Color,t=document.body.classList.contains("dark");for(let a=0;a<m;a++){const l=a*3;e[l]=(Math.random()-.5)*50,e[l+1]=(Math.random()-.5)*50,e[l+2]=(Math.random()-.5)*50,t?n.setHSL(.6,.8,.5+Math.random()*.2):n.setHSL(.6,.8,.3+Math.random()*.2),r[l]=n.r,r[l+1]=n.g,r[l+2]=n.b}o.setAttribute("position",new s.BufferAttribute(e,3)),o.setAttribute("color",new s.BufferAttribute(r,3));const i=new s.PointsMaterial({size:.1,vertexColors:!0,transparent:!0,opacity:.8});c=new s.Points(o,i),g.add(c)}function f(){requestAnimationFrame(f),c&&(c.rotation.x+=5e-4,c.rotation.y+=5e-4),u.render(g,d)}function y(){console.log("Setting up theme toggle...");const o=document.getElementById("theme-toggle"),e=document.body,r=localStorage.getItem("theme");(r==="dark"||!r&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&e.classList.add("dark"),o.addEventListener("click",()=>{const n=e.classList.toggle("dark");localStorage.setItem("theme",n?"dark":"light"),L()}),console.log("Theme toggle setup complete")}function L(){const o=document.body.classList.contains("dark");if(document.body.style.backgroundColor=o?"#1a1a1a":"#f8f9fa",c){const e=c.geometry.attributes.color.array,r=new s.Color;for(let n=0;n<m;n++){const t=n*3;o?r.setHSL(.6,.8,.5+Math.random()*.2):r.setHSL(.6,.8,.3+Math.random()*.2),e[t]=r.r,e[t+1]=r.g,e[t+2]=r.b}c.geometry.attributes.color.needsUpdate=!0}}function b(){console.log("Setting up mobile menu...");const o=document.querySelector(".md\\:hidden"),e=document.querySelector(".hidden.md\\:flex");o&&e&&o.addEventListener("click",()=>{e.classList.toggle("hidden"),e.classList.toggle("flex"),e.classList.toggle("flex-col"),e.classList.toggle("absolute"),e.classList.toggle("top-16"),e.classList.toggle("left-0"),e.classList.toggle("right-0"),e.classList.toggle("bg-white"),e.classList.toggle("dark:bg-dark-gray"),e.classList.toggle("p-4")}),console.log("Mobile menu setup complete")}function v(){console.log("Setting up smooth scroll..."),document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",function(e){e.preventDefault();const r=this.getAttribute("href"),n=document.querySelector(r);n&&(n.scrollIntoView({behavior:"smooth",block:"start"}),document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),this.classList.add("active"))})}),console.log("Smooth scroll setup complete")}const S=new MutationObserver(o=>{o.forEach(e=>{if(e.attributeName==="class"&&c){const r=c.geometry.attributes.color.array,n=new s.Color;for(let t=0;t<m;t++){const i=t*3;document.body.classList.contains("dark")?n.setHSL(.6,.8,.5+Math.random()*.2):n.setHSL(.6,.8,.3+Math.random()*.2),r[i]=n.r,r[i+1]=n.g,r[i+2]=n.b}c.geometry.attributes.color.needsUpdate=!0}})});S.observe(document.body,{attributes:!0});
