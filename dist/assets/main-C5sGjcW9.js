import*as s from"https://unpkg.com/three@0.157.0/build/three.module.js";import{gsap as h}from"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();console.log("Initializing portfolio...");let m,d,u,c;const g=2e3;document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, setting up...");try{p(),w(),L(),v()}catch(n){console.error("Error during initialization:",n)}});function p(){console.log("Initializing Three.js..."),m=new s.Scene,d=new s.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),d.position.z=30;const n=document.getElementById("particle-canvas");if(!n){console.error("Canvas element not found!");return}console.log("Canvas found, creating renderer..."),u=new s.WebGLRenderer({canvas:n,alpha:!0,antialias:!0}),u.setSize(window.innerWidth,window.innerHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),y();const e=new s.AmbientLight(16777215,.5);m.add(e);const r=new s.PointLight(16777215,1);r.position.set(10,10,10),m.add(r),window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}),document.addEventListener("mousemove",o=>{const t=o.clientX/window.innerWidth*2-1,i=-(o.clientY/window.innerHeight)*2+1;c&&h.to(c.rotation,{x:i*.1,y:t*.1,duration:2})}),console.log("Three.js initialization complete"),f()}function y(){const n=new s.BufferGeometry,e=new Float32Array(g*3),r=new Float32Array(g*3),o=new s.Color,t=document.body.classList.contains("dark");for(let l=0;l<g;l++){const a=l*3;e[a]=(Math.random()-.5)*50,e[a+1]=(Math.random()-.5)*50,e[a+2]=(Math.random()-.5)*50,t?o.setHSL(.6,.8,.5+Math.random()*.2):o.setHSL(.6,.8,.3+Math.random()*.2),r[a]=o.r,r[a+1]=o.g,r[a+2]=o.b}n.setAttribute("position",new s.BufferAttribute(e,3)),n.setAttribute("color",new s.BufferAttribute(r,3));const i=new s.PointsMaterial({size:.1,vertexColors:!0,transparent:!0,opacity:.8});c=new s.Points(n,i),m.add(c)}function f(){requestAnimationFrame(f),c&&(c.rotation.x+=5e-4,c.rotation.y+=5e-4),u.render(m,d)}function w(){console.log("Setting up theme toggle...");const n=document.getElementById("theme-toggle"),e=n.querySelector(".fa-sun"),r=n.querySelector(".fa-moon"),o=localStorage.getItem("theme");o==="dark"||!o&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.body.classList.add("dark"),e.style.display="none",r.style.display="block"):(document.body.classList.remove("dark"),e.style.display="block",r.style.display="none"),n.addEventListener("click",()=>{const t=document.body.classList.toggle("dark");localStorage.setItem("theme",t?"dark":"light"),e.style.display=t?"none":"block",r.style.display=t?"block":"none",b()}),console.log("Theme toggle setup complete")}function b(){if(!c)return;const n=c.geometry.attributes.color.array,e=new s.Color,r=document.body.classList.contains("dark");for(let o=0;o<g;o++){const t=o*3;r?e.setHSL(.6,.8,.5+Math.random()*.2):e.setHSL(.6,.8,.3+Math.random()*.2),n[t]=e.r,n[t+1]=e.g,n[t+2]=e.b}c.geometry.attributes.color.needsUpdate=!0}function L(){console.log("Setting up mobile menu...");const n=document.querySelector(".md\\:hidden"),e=document.querySelector(".hidden.md\\:flex");n&&e&&n.addEventListener("click",()=>{e.classList.toggle("hidden"),e.classList.toggle("flex"),e.classList.toggle("flex-col"),e.classList.toggle("absolute"),e.classList.toggle("top-16"),e.classList.toggle("left-0"),e.classList.toggle("right-0"),e.classList.toggle("bg-white"),e.classList.toggle("dark:bg-dark-gray"),e.classList.toggle("p-4")}),console.log("Mobile menu setup complete")}function v(){console.log("Setting up smooth scroll..."),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",function(e){e.preventDefault();const r=this.getAttribute("href"),o=document.querySelector(r);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),this.classList.add("active"))})}),console.log("Smooth scroll setup complete")}const S=new MutationObserver(n=>{n.forEach(e=>{if(e.attributeName==="class"&&c){const r=c.geometry.attributes.color.array,o=new s.Color;for(let t=0;t<g;t++){const i=t*3;document.body.classList.contains("dark")?o.setHSL(.6,.8,.5+Math.random()*.2):o.setHSL(.6,.8,.3+Math.random()*.2),r[i]=o.r,r[i+1]=o.g,r[i+2]=o.b}c.geometry.attributes.color.needsUpdate=!0}})});S.observe(document.body,{attributes:!0});
