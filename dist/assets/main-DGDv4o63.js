import*as s from"https://unpkg.com/three@0.157.0/build/three.module.js";import{gsap as h}from"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();console.log("Initializing portfolio...");let m,d,u,c;const g=2e3;document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, setting up..."),p(),L(),y(),v()});function p(){console.log("Initializing Three.js..."),m=new s.Scene,d=new s.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),d.position.z=30;const r=document.getElementById("particle-canvas");if(!r){console.error("Canvas element not found!");return}console.log("Canvas found, creating renderer..."),u=new s.WebGLRenderer({canvas:r,alpha:!0,antialias:!0}),u.setSize(window.innerWidth,window.innerHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),w();const e=new s.AmbientLight(16777215,.5);m.add(e);const n=new s.PointLight(16777215,1);n.position.set(10,10,10),m.add(n),window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}),document.addEventListener("mousemove",o=>{const t=o.clientX/window.innerWidth*2-1,i=-(o.clientY/window.innerHeight)*2+1;c&&h.to(c.rotation,{x:i*.1,y:t*.1,duration:2})}),console.log("Three.js initialization complete"),f()}function w(){const r=new s.BufferGeometry,e=new Float32Array(g*3),n=new Float32Array(g*3),o=new s.Color,t=document.body.classList.contains("dark");for(let a=0;a<g;a++){const l=a*3;e[l]=(Math.random()-.5)*50,e[l+1]=(Math.random()-.5)*50,e[l+2]=(Math.random()-.5)*50,t?o.setHSL(.6,.8,.5+Math.random()*.2):o.setHSL(.6,.8,.3+Math.random()*.2),n[l]=o.r,n[l+1]=o.g,n[l+2]=o.b}r.setAttribute("position",new s.BufferAttribute(e,3)),r.setAttribute("color",new s.BufferAttribute(n,3));const i=new s.PointsMaterial({size:.1,vertexColors:!0,transparent:!0,opacity:.8});c=new s.Points(r,i),m.add(c)}function f(){requestAnimationFrame(f),c&&(c.rotation.x+=5e-4,c.rotation.y+=5e-4),u.render(m,d)}function L(){console.log("Setting up theme toggle...");const r=document.getElementById("theme-toggle"),e=document.body,n=localStorage.getItem("theme");(n==="dark"||!n&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&e.classList.add("dark"),r.addEventListener("click",()=>{const o=e.classList.toggle("dark");localStorage.setItem("theme",o?"dark":"light"),b()}),console.log("Theme toggle setup complete")}function b(){const r=document.body.classList.contains("dark");if(document.body.style.backgroundColor=r?"#1a1a1a":"#f8f9fa",c){const e=c.geometry.attributes.color.array,n=new s.Color;for(let o=0;o<g;o++){const t=o*3;r?n.setHSL(.6,.8,.5+Math.random()*.2):n.setHSL(.6,.8,.3+Math.random()*.2),e[t]=n.r,e[t+1]=n.g,e[t+2]=n.b}c.geometry.attributes.color.needsUpdate=!0}}function y(){console.log("Setting up mobile menu...");const r=document.querySelector(".md\\:hidden"),e=document.querySelector(".hidden.md\\:flex");r&&e&&r.addEventListener("click",()=>{e.classList.toggle("hidden"),e.classList.toggle("flex"),e.classList.toggle("flex-col"),e.classList.toggle("absolute"),e.classList.toggle("top-16"),e.classList.toggle("left-0"),e.classList.toggle("right-0"),e.classList.toggle("bg-white"),e.classList.toggle("dark:bg-dark-gray"),e.classList.toggle("p-4")}),console.log("Mobile menu setup complete")}function v(){console.log("Setting up smooth scroll..."),document.querySelectorAll('a[href^="#"]').forEach(r=>{r.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href"),o=document.querySelector(n);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),this.classList.add("active"))})}),console.log("Smooth scroll setup complete")}const S=new MutationObserver(r=>{r.forEach(e=>{if(e.attributeName==="class"&&c){const n=c.geometry.attributes.color.array,o=new s.Color;for(let t=0;t<g;t++){const i=t*3;document.body.classList.contains("dark")?o.setHSL(.6,.8,.5+Math.random()*.2):o.setHSL(.6,.8,.3+Math.random()*.2),n[i]=o.r,n[i+1]=o.g,n[i+2]=o.b}c.geometry.attributes.color.needsUpdate=!0}})});S.observe(document.body,{attributes:!0});
